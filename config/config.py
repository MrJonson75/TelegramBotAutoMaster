import os
from dotenv import load_dotenv


class Config:
    """–ö–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞."""

    # –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    load_dotenv()

    # –¢–æ–∫–µ–Ω—ã –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
    BOT_TOKEN = os.getenv("BOT_TOKEN")
    ADMIN_ID = os.getenv("ADMIN")
    YANDEX_API_KEY = os.getenv("YANDEX_IAM_TOKEN")
    YANDEX_FOLDER_ID = os.getenv("YANDEX_FOLDER_ID")
    HUGGINGFACE_API_KEY = os.getenv("HUGGINGFACE_API_KEY")

    # –ë–∞–∑–æ–≤–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    PHOTO_DIR = "photos"

    # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò
    AI_PROMPT = """
    –í—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∑–∏–ª –¥–æ 3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏–ª–∏ –µ–≥–æ –¥–µ—Ç–∞–ª–µ–π. 
    –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–±–ª–µ–º—ã, —É–∫–∞–∑–∞–≤:
    - –í–µ—Ä–æ—è—Ç–Ω—É—é –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å.
    - –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã.
    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–º–æ–Ω—Ç—É.
    –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —è—Å–Ω–∞, —É–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –º–∞—Å—Ç–µ—Ä–∞.
    –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –Ω–µ –±–æ–ª–µ–µ 200 —Å–∏–º–≤–æ–ª–æ–≤.
    """

    AI_PROMPT_STR = """
    –¢—ã –∞–≤—Ç–æ–º–µ—Ö–∞–Ω–∏–∫. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –¥–∞–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑.
    - –í–µ—Ä–æ—è—Ç–Ω—É—é –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å.
    - –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã.
    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–º–æ–Ω—Ç—É.
    –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —è—Å–Ω–∞, —É–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –º–∞—Å—Ç–µ—Ä–∞.
    –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –Ω–µ –±–æ–ª–µ–µ 200 —Å–∏–º–≤–æ–ª–æ–≤.
    """

    # –¢–µ–∫—Å—Ç—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    MESSAGES = {
        "welcome": (
            "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ RemDiesel üöö!\n"
            "–Ø –ø–æ–º–æ–≥—É –≤–∞–º:\n"
            "- –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∏–ª–∏ —Ä–µ–º–æ–Ω—Ç\n"
            "- –ü—Ä–æ–≤–µ—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø–æ —Ñ–æ—Ç–æ\n"
            "- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞—à–∏ –∑–∞–ø–∏—Å–∏\n"
            "- –£–∑–Ω–∞—Ç—å –æ –º–∞—Å—Ç–µ—Ä–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
        ),
        "contacts": (
            "üìû –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:\n"
            "–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67\n"
            "Email: support@remdiesel.ru\n"
            "–ê–¥—Ä–µ—Å: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è, –¥. 10\n"
            "–ö–∞–∫ –ø—Ä–æ–µ—Ö–∞—Ç—å: –º. –ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è, 5 –º–∏–Ω –ø–µ—à–∫–æ–º"
        ),
        "about_master": (
            "üõ† –ú–∞—Å—Ç–µ—Ä –ò–≤–∞–Ω - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –¥–∏–∑–µ–ª—å–Ω—ã–º –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º —Å 15-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º.\n"
            "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, —Ä–µ–º–æ–Ω—Ç –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π, –¢–û.\n"
            "–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –Ω–∞—à–∏—Ö —Ä–∞–±–æ—Ç!"
        )
    }

    # –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
    SERVICES = [
        {"name": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏", "duration_minutes": 60},
        {"name": "–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –≤ –¥–≤–∏–≥–∞—Ç–µ–ª–µ", "duration_minutes": 30},
        {"name": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ö–æ–¥–æ–≤–æ–π", "duration_minutes": 45},
        {"name": "–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –≤ –ê–ö–ü–ü", "duration_minutes": 90},
        {"name": "–ó–∞–º–µ–Ω–∞ –∫–æ–ª–æ–¥–æ–∫", "duration_minutes": 90},
        {"name": "–ü–æ–¥–∞—á–∞ –¥–∏–∑–µ–ª—å–Ω–æ–≥–æ —Ç–æ–ø–ª–∏–≤–∞", "duration_minutes": 20}
    ]

    @staticmethod
    def get_photo_path(file_name: str) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –∫–∞—Ç–∞–ª–æ–≥–µ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏.

        Args:
            file_name (str): –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'welcome').

        Returns:
            str: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'photos/welcome.jpg').

        Raises:
            FileNotFoundError: –ï—Å–ª–∏ —Ñ–∞–π–ª –∏–ª–∏ –ø–∞–ø–∫–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.
            ValueError: –ï—Å–ª–∏ –∏–º—è —Ñ–∞–π–ª–∞ –ø—É—Å—Ç–æ–µ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.
        """
        if not file_name or not isinstance(file_name, str):
            raise ValueError("–ò–º—è —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π")

        # –§–æ—Ä–º–∏—Ä—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .jpg
        file_name = file_name.strip()
        if not file_name:
            raise ValueError("–ò–º—è —Ñ–∞–π–ª–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã
        invalid_chars = '<>:"/\\|?*'
        if any(char in file_name for char in invalid_chars):
            raise ValueError(f"–ò–º—è —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã: {invalid_chars}")

        # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—É—Ç—å
        file_path = os.path.join(Config.PHOTO_DIR, f"{file_name}.jpg")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏
        if not os.path.exists(Config.PHOTO_DIR):
            raise FileNotFoundError(f"–ü–∞–ø–∫–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {Config.PHOTO_DIR}")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
        if not os.path.isfile(file_path):
            raise FileNotFoundError(f"–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {file_path}")

        return file_path